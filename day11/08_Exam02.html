<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <button onclick="play(1)"><img src="../image/scissors.png" alt=""></button>
    <button onclick="play(2)"><img src="../image/rock.png" alt=""></button>
    <button onclick="play(3)"><img src="../image/paper.png" alt=""></button>
    <h3 id="h3"></h3>

    <script>
        let h3 = document.getElementById('h3');
        // 누적이 되어야하는 점수
        let count = 1;
        let win = 0;
        let drow = 0;
        let lose = 0;

        // 초기 설정
        let str = ``;

        // 승패 결정
        function play(player){
            let com = Math.floor(Math.random()*3)+1;
            str = ``;                                 // Html 출력값 초기화
            if((player == 1 && com == 3) || (player == 2 && com == 1) || (player == 3 && com == 2)){
                win ++;
                str += `player : ${change(player)} / com : ${change(com)} => player가 이겼습니다.<br>`
            }else if(player == com){
                drow ++;
                str += `player : ${change(player)} / com : ${change(com)} => player가 비겼습니다.<br>`
            }else{
                lose ++;
                str += `player : ${change(player)} / com : ${change(com)} => player가 졌습니다.<br>`
            }
            
            printResult();
            count ++;
        }

        // 숫자 => 문자 출력
        function change(n){
            if(n == 1){
                return `가위`;
            }else if(n == 2){
                return `바위`;
            }else if(n == 3){
                return `보`;
            }else{
                return `오류`;
            }
        }

        // 출력
        function printResult(){
            str += `현재 전적<br>`;
            str += `승 : ${win} / 무 : ${drow} / 패 : ${lose}<br>`;
            let check = count - drow;
            if(count - drow == 0){                                      // 0으로 나누기 방지
                check = 1;
            }
            str += `승률 : ${(win / (check)*100).toFixed(2)}%`;
            h3.innerHTML = str; 
        }
    </script>
</body>
</html>